<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Stock Plugins - IBDCluster</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Stock Plugins | IBDCluster</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Stock Plugins" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A cli tool to analyze ibd sharing for a specific locus for multiple phenotypes" /> <meta property="og:description" content="A cli tool to analyze ibd sharing for a specific locus for multiple phenotypes" /> <link rel="canonical" href="http://localhost:4000/documentation/stock_plugins.html" /> <meta property="og:url" content="http://localhost:4000/documentation/stock_plugins.html" /> <meta property="og:site_name" content="IBDCluster" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Stock Plugins" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A cli tool to analyze ibd sharing for a specific locus for multiple phenotypes","headline":"Stock Plugins","url":"http://localhost:4000/documentation/stock_plugins.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> IBDCluster </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/" class="nav-list-link">Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/installation.html" class="nav-list-link">Installation</a><ul class="nav-list"><li class="nav-list-item "> <a href="/documentation/github.html" class="nav-list-link">Github Installation</a> </li><li class="nav-list-item "> <a href="/documentation/pip.html" class="nav-list-link">Pip Installation</a> </li><li class="nav-list-item "> <a href="/documentation/docker.html" class="nav-list-link">Docker Installation</a> </li></ul></li><li class="nav-list-item "><a href="/documentation/inputs.html" class="nav-list-link">Inputs</a></li><li class="nav-list-item "><a href="/documentation/outputs.html" class="nav-list-link">Outputs</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/customization.html" class="nav-list-link">Customization</a><ul class="nav-list"><li class="nav-list-item "> <a href="/documentation/api_design.html" class="nav-list-link">API Design</a> </li><li class="nav-list-item active"> <a href="/documentation/stock_plugins.html" class="nav-list-link active">Stock Plugins</a> </li><li class="nav-list-item "> <a href="/documentation/design_your_own_plugin.html" class="nav-list-link">Custom Pluging Design</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/examples/" class="nav-list-link">Example Scripts</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="/changelog.html" class="nav-list-link">Changelog</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search IBDCluster" aria-label="Search IBDCluster" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/jtb324/IBDCluster" class="site-button" target="_blank" rel="noopener noreferrer" > IBDCluster on Github </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/documentation/">Documentation</a></li> <li class="breadcrumb-nav-list-item"><a href="/documentation/customization.html">Customization</a></li> <li class="breadcrumb-nav-list-item"><span>Stock Plugins</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="stock-plugins"> <a href="#stock-plugins" class="anchor-heading" aria-labelledby="stock-plugins"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Stock plugins: </h1> <hr /> <p>IBDCluster comes with three stock plugins. Each of these plugins access the api described by the “api_design” section of the documentation. These plugins are responsible for the calculation of the different pvalues for each phenotype, writing out the information for each network to a file, and writing out the information for each of the pairs to the file. All of these plugins are found within the plugin directory within the ibd source code directory. This directory can be found within where you installed the program. Once inside the install directory if you just run the following two commands then you should see the plugins subdirectory:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>IBDCluster/
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span>
</code></pre></div></div> <p>This directory is designed as a python module so it has an __init__.py file so that the python interpreter can import the code. The other three files in these directory are the plugins.</p> <h2 id="overview-of-the-plugin-design"> <a href="#overview-of-the-plugin-design" class="anchor-heading" aria-labelledby="overview-of-the-plugin-design"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview of the Plugin design: </h2> <hr /> <h3 id="basic-structure-of-the-plugin-class"> <a href="#basic-structure-of-the-plugin-class" class="anchor-heading" aria-labelledby="basic-structure-of-the-plugin-class"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic structure of the plugin class: </h3> <p>The stock plugins use an object oriented design meaning each plugin is a class that has a method that gets called by the IBDCluster program. An example of the basic required plugin file structure is shown below and we’ll discuss each part.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">factory</span> <span class="kn">import</span> <span class="n">factory_register</span>

<span class="o">@</span><span class="n">dataclass</span>
<span class="k">class</span> <span class="nc">Plugin_Class</span><span class="p">:</span>
    <span class="s">"""Example of the base requirements for a plugin class"""</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">""</span>

    <span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="s">"""the analysis method is what gets called by the IBDCluster program"""</span>

<span class="k">def</span> <span class="nf">initialize</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">factory_register</span><span class="p">(</span><span class="s">"pvalues"</span><span class="p">,</span> <span class="n">Pvalues</span><span class="p">)</span>
</code></pre></div></div> <p><strong><em>Imports:</em></strong><br /> The example plugin here imports dataclass and a method called factory_register. If you are unfamiliar with dataclasses you can read about it here, (<a href="https://docs.python.org/3/library/dataclasses.html">Documentation link here</a>), but they are basically just newer abstractions of the standard python class (with a bit of subjective pros/cons). You can use a normal class structure, you just need to create a __init__ function with the name attribute. The plugin also imports the factory_register function. We’re not going to describe this plugin in detail because it just abstracts away some of the core functionality of the IBDCluster program. This function comes from a program module called factory (This module is not a standard python library so please don’t try to find it). This function is required to have your module properly loaded into the program.</p> <p><strong><em>Class Structure:</em></strong><br /> The plugin class only has one required attribute and this the plugin’s name. This name is used in a logging statement by the program (Therefore the program will give you an error if this is not there). The plugin also has to have one method named “analyze” which only takes key word arguments. This method also doesn’t return anything. The three keyword arguments that the program passes to this method, will be “data”, “network”, “output”. These arguments are what the plugins access.</p> <p><strong><em>Initialize function:</em></strong><br /> Each plugin file also has a function called initialize. This function doesn’t take any inputs and returns nothing. The purpose of this function is to called the factory_register function. It passes the name of the plugin as the first argument and the plugin Class as the second argument.</p> <p class="warning"><strong><em>Warning:</em></strong><br /> The name argument that is passed to the factory_register has to correspond to the name in the methods section of the config.json file. If it is not the same then the program will give an error when trying to load in the plugin.</p> <p class="optional"><strong><em>Note on Plugin order:</em></strong> <br /> The order of these plugins matters (To some degree) and that will be described below.</p> <h2 id="overview-of-each-plugin"> <a href="#overview-of-each-plugin" class="anchor-heading" aria-labelledby="overview-of-each-plugin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview of each Plugin: </h2> <hr /> <h3 id="pvaluespy"> <a href="#pvaluespy" class="anchor-heading" aria-labelledby="pvaluespy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> pvalues.py: </h3> <p>This plugin is responsible for determining the enrichment p-values from the binomial test for each phenotype for each network. To determine the p-values, the program relies on the binomtest function from the scipy.stats library. The plugin also determines the minimum p-value found for each network as well as the phenotype that the p-value represents. The plugins creates a string with all of this information. A example string of what will be formed for two phenotypes is shown below:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">minimum</span> <span class="n">pvalue</span><span class="si">}</span><span class="s">/t</span><span class="si">{</span><span class="n">correspond</span> <span class="n">phenotype</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">phenotype</span> <span class="n">description</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">number</span> <span class="n">of</span> <span class="n">people</span> <span class="n">affected</span> <span class="n">by</span> <span class="n">phenotype</span> <span class="n">A</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">phenotype</span> <span class="n">A</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">number</span> <span class="n">of</span> <span class="n">people</span> <span class="n">affected</span> <span class="n">by</span> <span class="n">phenotype</span> <span class="n">B</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">phenotype</span> <span class="n">B</span> <span class="n">p</span><span class="o">-</span><span class="n">value</span><span class="si">}</span><span class="s">"</span>
</code></pre></div></div> <p>This string will be saved in the network.pvalues attribute of the network models.</p> <h3 id="network_writerpy"> <a href="#network_writerpy" class="anchor-heading" aria-labelledby="network_writerpy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> network_writer.py: </h3> <p>Function that writes all of the information to the networks.txt output file. The description of this output file can be found in the “outputs” section of the documentation.</p> <h3 id="allpair_writerpy"> <a href="#allpair_writerpy" class="anchor-heading" aria-labelledby="allpair_writerpy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> allpair_writer.py: </h3> <p>Function that writes all of the information to the allpairs.txt output file. The description of this output file can be found in the “outputs” section of the documentation.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
